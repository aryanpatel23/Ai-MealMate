export interface MealData {
  cuisine: string
  recipe_name: string
  recipe_description: string
  ingredients: Array<{ name: string; quantity: number; unit: string }>
  instructions: string[]
  prep_time: number
  cook_time: number
  calories_per_serving: number
  nutrition_info: {
    protein: number
    carbs: number
    fat: number
    fiber: number
    sodium?: number
    sugar?: number
    calcium?: number
    iron?: number
    vitamin_c?: number
  }
  difficulty: "beginner" | "intermediate" | "advanced"
  meal_types: ("breakfast" | "lunch" | "dinner" | "snack")[]
}

export const CUISINE_MEALS: Record<string, MealData[]> = {
  Indian: [
    {
      cuisine: "Indian",
      recipe_name: "Masala Scrambled Eggs",
      recipe_description: "Spiced scrambled eggs with onions, tomatoes, and Indian spices",
      ingredients: [
        { name: "Eggs", quantity: 3, unit: "large" },
        { name: "Onion", quantity: 1, unit: "medium" },
        { name: "Tomato", quantity: 1, unit: "medium" },
        { name: "Green chili", quantity: 1, unit: "small" },
        { name: "Turmeric powder", quantity: 0.5, unit: "tsp" },
        { name: "Cumin powder", quantity: 0.5, unit: "tsp" },
        { name: "Coriander leaves", quantity: 2, unit: "tbsp" },
        { name: "Oil", quantity: 2, unit: "tbsp" },
      ],
      instructions: [
        "Heat oil in a pan and sauté diced onions until golden",
        "Add chopped tomatoes and green chili, cook until soft",
        "Add turmeric and cumin powder, mix well",
        "Beat eggs and pour into the pan",
        "Scramble gently until cooked, garnish with coriander",
      ],
      prep_time: 10,
      cook_time: 8,
      calories_per_serving: 285,
      nutrition_info: {
        protein: 20,
        carbs: 8,
        fat: 18,
        fiber: 2,
        sodium: 320,
        iron: 2.5,
        vitamin_c: 15,
      },
      difficulty: "beginner",
      meal_types: ["breakfast"],
    },
    {
      cuisine: "Indian",
      recipe_name: "Chicken Tikka Masala",
      recipe_description: "Tender chicken in a creamy tomato-based curry sauce",
      ingredients: [
        { name: "Chicken breast", quantity: 1, unit: "lb" },
        { name: "Yogurt", quantity: 0.5, unit: "cup" },
        { name: "Onion", quantity: 1, unit: "large" },
        { name: "Tomato puree", quantity: 1, unit: "cup" },
        { name: "Heavy cream", quantity: 0.5, unit: "cup" },
        { name: "Garam masala", quantity: 2, unit: "tsp" },
        { name: "Ginger-garlic paste", quantity: 1, unit: "tbsp" },
        { name: "Paprika", quantity: 1, unit: "tsp" },
      ],
      instructions: [
        "Marinate chicken in yogurt and spices for 30 minutes",
        "Grill chicken until cooked through",
        "Sauté onions until golden, add ginger-garlic paste",
        "Add tomato puree and spices, simmer for 10 minutes",
        "Add cream and grilled chicken, simmer for 5 minutes",
      ],
      prep_time: 45,
      cook_time: 25,
      calories_per_serving: 420,
      nutrition_info: {
        protein: 35,
        carbs: 12,
        fat: 24,
        fiber: 3,
        sodium: 580,
        calcium: 180,
        iron: 3.2,
      },
      difficulty: "intermediate",
      meal_types: ["lunch", "dinner"],
    },
    {
      cuisine: "Indian",
      recipe_name: "Aloo Paratha",
      recipe_description: "Stuffed flatbread with spiced potato filling",
      ingredients: [
        { name: "Whole wheat flour", quantity: 2, unit: "cups" },
        { name: "Potatoes", quantity: 3, unit: "medium" },
        { name: "Green chili", quantity: 2, unit: "small" },
        { name: "Ginger", quantity: 1, unit: "inch" },
        { name: "Cumin seeds", quantity: 1, unit: "tsp" },
        { name: "Coriander powder", quantity: 1, unit: "tsp" },
        { name: "Ghee", quantity: 3, unit: "tbsp" },
        { name: "Salt", quantity: 1, unit: "tsp" },
      ],
      instructions: [
        "Boil and mash potatoes with spices",
        "Make dough with flour and water",
        "Roll out dough, add potato filling, seal edges",
        "Cook on griddle with ghee until golden brown",
        "Serve hot with yogurt and pickle",
      ],
      prep_time: 30,
      cook_time: 20,
      calories_per_serving: 340,
      nutrition_info: {
        protein: 8,
        carbs: 58,
        fat: 9,
        fiber: 6,
        sodium: 400,
        iron: 2.8,
        vitamin_c: 12,
      },
      difficulty: "intermediate",
      meal_types: ["breakfast", "lunch"],
    },
    {
      cuisine: "Indian",
      recipe_name: "Dal Tadka",
      recipe_description: "Yellow lentils tempered with aromatic spices",
      ingredients: [
        { name: "Yellow lentils", quantity: 1, unit: "cup" },
        { name: "Onion", quantity: 1, unit: "medium" },
        { name: "Tomato", quantity: 2, unit: "medium" },
        { name: "Ginger-garlic paste", quantity: 1, unit: "tbsp" },
        { name: "Cumin seeds", quantity: 1, unit: "tsp" },
        { name: "Mustard seeds", quantity: 0.5, unit: "tsp" },
        { name: "Turmeric powder", quantity: 0.5, unit: "tsp" },
        { name: "Red chili powder", quantity: 1, unit: "tsp" },
        { name: "Ghee", quantity: 2, unit: "tbsp" },
      ],
      instructions: [
        "Pressure cook lentils with turmeric until soft",
        "Heat ghee, add cumin and mustard seeds",
        "Add onions, cook until golden",
        "Add ginger-garlic paste, tomatoes, and spices",
        "Mix with cooked lentils, simmer for 10 minutes",
      ],
      prep_time: 15,
      cook_time: 25,
      calories_per_serving: 280,
      nutrition_info: {
        protein: 18,
        carbs: 42,
        fat: 6,
        fiber: 12,
        sodium: 320,
        iron: 4.2,
        folate: 180,
      },
      difficulty: "beginner",
      meal_types: ["lunch", "dinner"],
    },
    {
      cuisine: "Indian",
      recipe_name: "Biryani",
      recipe_description: "Fragrant rice dish with spiced meat and aromatic herbs",
      ingredients: [
        { name: "Basmati rice", quantity: 2, unit: "cups" },
        { name: "Chicken", quantity: 1, unit: "lb" },
        { name: "Yogurt", quantity: 0.5, unit: "cup" },
        { name: "Onion", quantity: 2, unit: "large" },
        { name: "Mint leaves", quantity: 0.5, unit: "cup" },
        { name: "Coriander leaves", quantity: 0.5, unit: "cup" },
        { name: "Biryani masala", quantity: 2, unit: "tbsp" },
        { name: "Saffron", quantity: 0.25, unit: "tsp" },
        { name: "Ghee", quantity: 4, unit: "tbsp" },
      ],
      instructions: [
        "Marinate chicken in yogurt and spices for 2 hours",
        "Fry onions until golden and crispy",
        "Cook marinated chicken until tender",
        "Parboil rice with whole spices",
        "Layer rice and chicken, cook on dum for 45 minutes",
      ],
      prep_time: 150,
      cook_time: 60,
      calories_per_serving: 520,
      nutrition_info: {
        protein: 28,
        carbs: 65,
        fat: 15,
        fiber: 3,
        sodium: 680,
        iron: 3.5,
        vitamin_b6: 0.8,
      },
      difficulty: "advanced",
      meal_types: ["lunch", "dinner"],
    },
    {
      cuisine: "Indian",
      recipe_name: "Masala Dosa",
      recipe_description: "Crispy fermented crepe with spiced potato filling",
      ingredients: [
        { name: "Dosa batter", quantity: 2, unit: "cups" },
        { name: "Potatoes", quantity: 4, unit: "medium" },
        { name: "Onion", quantity: 1, unit: "large" },
        { name: "Mustard seeds", quantity: 1, unit: "tsp" },
        { name: "Curry leaves", quantity: 10, unit: "pieces" },
        { name: "Turmeric powder", quantity: 0.5, unit: "tsp" },
        { name: "Green chili", quantity: 2, unit: "small" },
        { name: "Oil", quantity: 3, unit: "tbsp" },
      ],
      instructions: [
        "Boil potatoes and cut into cubes",
        "Heat oil, add mustard seeds and curry leaves",
        "Add onions and green chilies, sauté",
        "Add potatoes and turmeric, mix well",
        "Spread dosa batter on griddle, add filling, fold and serve",
      ],
      prep_time: 20,
      cook_time: 25,
      calories_per_serving: 380,
      nutrition_info: {
        protein: 12,
        carbs: 68,
        fat: 8,
        fiber: 5,
        sodium: 420,
        vitamin_c: 18,
        potassium: 680,
      },
      difficulty: "intermediate",
      meal_types: ["breakfast", "lunch"],
    },
  ],
  Thai: [
    {
      cuisine: "Thai",
      recipe_name: "Thai Basil Fried Rice",
      recipe_description: "Aromatic fried rice with Thai basil and vegetables",
      ingredients: [
        { name: "Jasmine rice", quantity: 2, unit: "cups cooked" },
        { name: "Thai basil", quantity: 1, unit: "cup" },
        { name: "Bell pepper", quantity: 1, unit: "medium" },
        { name: "Onion", quantity: 1, unit: "small" },
        { name: "Garlic", quantity: 3, unit: "cloves" },
        { name: "Soy sauce", quantity: 2, unit: "tbsp" },
        { name: "Fish sauce", quantity: 1, unit: "tbsp" },
        { name: "Vegetable oil", quantity: 2, unit: "tbsp" },
      ],
      instructions: [
        "Heat oil in a wok over high heat",
        "Add garlic and onion, stir-fry for 1 minute",
        "Add bell pepper and cook for 2 minutes",
        "Add rice, breaking up clumps",
        "Add sauces and Thai basil, toss until fragrant",
      ],
      prep_time: 15,
      cook_time: 10,
      calories_per_serving: 320,
      nutrition_info: {
        protein: 8,
        carbs: 58,
        fat: 8,
        fiber: 3,
        sodium: 890,
        vitamin_c: 45,
      },
      difficulty: "beginner",
      meal_types: ["lunch", "dinner"],
    },
    {
      cuisine: "Thai",
      recipe_name: "Pad Thai",
      recipe_description: "Classic stir-fried rice noodles with tamarind sauce",
      ingredients: [
        { name: "Rice noodles", quantity: 8, unit: "oz" },
        { name: "Shrimp", quantity: 0.5, unit: "lb" },
        { name: "Eggs", quantity: 2, unit: "large" },
        { name: "Bean sprouts", quantity: 1, unit: "cup" },
        { name: "Tamarind paste", quantity: 2, unit: "tbsp" },
        { name: "Fish sauce", quantity: 2, unit: "tbsp" },
        { name: "Palm sugar", quantity: 2, unit: "tbsp" },
        { name: "Peanuts", quantity: 0.25, unit: "cup" },
        { name: "Lime", quantity: 1, unit: "large" },
      ],
      instructions: [
        "Soak rice noodles in warm water until soft",
        "Heat oil in wok, scramble eggs and set aside",
        "Stir-fry shrimp until pink",
        "Add noodles and sauce mixture, toss well",
        "Add bean sprouts, eggs, garnish with peanuts and lime",
      ],
      prep_time: 20,
      cook_time: 15,
      calories_per_serving: 420,
      nutrition_info: {
        protein: 22,
        carbs: 58,
        fat: 12,
        fiber: 3,
        sodium: 980,
        vitamin_c: 15,
        calcium: 80,
      },
      difficulty: "intermediate",
      meal_types: ["lunch", "dinner"],
    },
    {
      cuisine: "Thai",
      recipe_name: "Tom Yum Soup",
      recipe_description: "Spicy and sour Thai soup with shrimp",
      ingredients: [
        { name: "Shrimp", quantity: 0.5, unit: "lb" },
        { name: "Mushrooms", quantity: 1, unit: "cup" },
        { name: "Lemongrass", quantity: 2, unit: "stalks" },
        { name: "Kaffir lime leaves", quantity: 4, unit: "pieces" },
        { name: "Galangal", quantity: 1, unit: "inch" },
        { name: "Thai chilies", quantity: 3, unit: "small" },
        { name: "Fish sauce", quantity: 2, unit: "tbsp" },
        { name: "Lime juice", quantity: 3, unit: "tbsp" },
        { name: "Chicken broth", quantity: 4, unit: "cups" },
      ],
      instructions: [
        "Bring broth to boil with lemongrass, galangal, lime leaves",
        "Add mushrooms and simmer for 5 minutes",
        "Add shrimp and chilies, cook until shrimp is pink",
        "Season with fish sauce and lime juice",
        "Garnish with cilantro and serve hot",
      ],
      prep_time: 15,
      cook_time: 20,
      calories_per_serving: 180,
      nutrition_info: {
        protein: 20,
        carbs: 8,
        fat: 6,
        fiber: 2,
        sodium: 890,
        vitamin_c: 25,
        selenium: 28,
      },
      difficulty: "beginner",
      meal_types: ["lunch", "dinner"],
    },
    {
      cuisine: "Thai",
      recipe_name: "Green Curry",
      recipe_description: "Creamy coconut curry with vegetables and herbs",
      ingredients: [
        { name: "Green curry paste", quantity: 3, unit: "tbsp" },
        { name: "Coconut milk", quantity: 1, unit: "can" },
        { name: "Chicken thigh", quantity: 1, unit: "lb" },
        { name: "Thai eggplant", quantity: 1, unit: "cup" },
        { name: "Thai basil", quantity: 0.5, unit: "cup" },
        { name: "Fish sauce", quantity: 2, unit: "tbsp" },
        { name: "Palm sugar", quantity: 1, unit: "tbsp" },
        { name: "Kaffir lime leaves", quantity: 4, unit: "pieces" },
      ],
      instructions: [
        "Heat thick coconut milk, fry curry paste until fragrant",
        "Add chicken, cook until almost done",
        "Add remaining coconut milk and eggplant",
        "Season with fish sauce and palm sugar",
        "Add basil and lime leaves, simmer briefly",
      ],
      prep_time: 15,
      cook_time: 25,
      calories_per_serving: 480,
      nutrition_info: {
        protein: 26,
        carbs: 12,
        fat: 36,
        fiber: 4,
        sodium: 720,
        iron: 2.8,
        vitamin_a: 180,
      },
      difficulty: "intermediate",
      meal_types: ["lunch", "dinner"],
    },
    {
      cuisine: "Thai",
      recipe_name: "Mango Sticky Rice",
      recipe_description: "Sweet dessert with coconut sticky rice and fresh mango",
      ingredients: [
        { name: "Glutinous rice", quantity: 1, unit: "cup" },
        { name: "Coconut milk", quantity: 1, unit: "cup" },
        { name: "Palm sugar", quantity: 0.25, unit: "cup" },
        { name: "Salt", quantity: 0.25, unit: "tsp" },
        { name: "Mango", quantity: 2, unit: "large" },
        { name: "Toasted sesame seeds", quantity: 1, unit: "tbsp" },
      ],
      instructions: [
        "Steam glutinous rice for 25 minutes until tender",
        "Heat coconut milk with sugar and salt",
        "Mix half the coconut mixture with cooked rice",
        "Slice mangoes and arrange with rice",
        "Drizzle remaining coconut sauce and sprinkle sesame seeds",
      ],
      prep_time: 15,
      cook_time: 30,
      calories_per_serving: 320,
      nutrition_info: {
        protein: 4,
        carbs: 68,
        fat: 8,
        fiber: 3,
        sodium: 150,
        vitamin_c: 60,
        vitamin_a: 1080,
      },
      difficulty: "beginner",
      meal_types: ["snack"],
    },
  ],
  Chinese: [
    {
      cuisine: "Chinese",
      recipe_name: "Kung Pao Chicken",
      recipe_description: "Spicy stir-fried chicken with peanuts and vegetables",
      ingredients: [
        { name: "Chicken thigh", quantity: 1, unit: "lb" },
        { name: "Peanuts", quantity: 0.5, unit: "cup" },
        { name: "Bell pepper", quantity: 1, unit: "medium" },
        { name: "Dried chilies", quantity: 6, unit: "pieces" },
        { name: "Soy sauce", quantity: 3, unit: "tbsp" },
        { name: "Rice vinegar", quantity: 2, unit: "tbsp" },
        { name: "Cornstarch", quantity: 1, unit: "tbsp" },
        { name: "Sesame oil", quantity: 1, unit: "tsp" },
      ],
      instructions: [
        "Cut chicken into cubes and marinate with soy sauce and cornstarch",
        "Heat oil in wok, stir-fry chicken until golden",
        "Add dried chilies and peanuts, stir-fry briefly",
        "Add bell pepper and sauce mixture",
        "Toss everything together and finish with sesame oil",
      ],
      prep_time: 20,
      cook_time: 12,
      calories_per_serving: 380,
      nutrition_info: {
        protein: 28,
        carbs: 15,
        fat: 22,
        fiber: 4,
        sodium: 720,
        vitamin_c: 35,
      },
      difficulty: "intermediate",
      meal_types: ["lunch", "dinner"],
    },
    {
      cuisine: "Chinese",
      recipe_name: "Mapo Tofu",
      recipe_description: "Spicy Sichuan tofu in fermented bean sauce",
      ingredients: [
        { name: "Silken tofu", quantity: 1, unit: "lb" },
        { name: "Ground pork", quantity: 0.25, unit: "lb" },
        { name: "Doubanjiang", quantity: 2, unit: "tbsp" },
        { name: "Sichuan peppercorns", quantity: 1, unit: "tsp" },
        { name: "Garlic", quantity: 3, unit: "cloves" },
        { name: "Ginger", quantity: 1, unit: "inch" },
        { name: "Scallions", quantity: 3, unit: "stalks" },
        { name: "Chicken broth", quantity: 0.5, unit: "cup" },
        { name: "Cornstarch", quantity: 1, unit: "tbsp" },
      ],
      instructions: [
        "Cut tofu into cubes, blanch in salted water",
        "Brown ground pork in wok",
        "Add doubanjiang, garlic, and ginger",
        "Add tofu and broth, simmer gently",
        "Thicken with cornstarch slurry, garnish with scallions",
      ],
      prep_time: 15,
      cook_time: 20,
      calories_per_serving: 280,
      nutrition_info: {
        protein: 18,
        carbs: 8,
        fat: 20,
        fiber: 2,
        sodium: 890,
        calcium: 350,
        iron: 3.2,
      },
      difficulty: "intermediate",
      meal_types: ["lunch", "dinner"],
    },
    {
      cuisine: "Chinese",
      recipe_name: "Sweet and Sour Pork",
      recipe_description: "Crispy pork with tangy sweet and sour sauce",
      ingredients: [
        { name: "Pork shoulder", quantity: 1, unit: "lb" },
        { name: "Pineapple chunks", quantity: 1, unit: "cup" },
        { name: "Bell pepper", quantity: 1, unit: "large" },
        { name: "Onion", quantity: 1, unit: "medium" },
        { name: "Ketchup", quantity: 0.25, unit: "cup" },
        { name: "Rice vinegar", quantity: 3, unit: "tbsp" },
        { name: "Sugar", quantity: 3, unit: "tbsp" },
        { name: "Cornstarch", quantity: 0.5, unit: "cup" },
        { name: "Egg", quantity: 1, unit: "large" },
      ],
      instructions: [
        "Cut pork into chunks, coat with egg and cornstarch",
        "Deep fry pork until golden and crispy",
        "Stir-fry vegetables until tender-crisp",
        "Mix sauce ingredients and bring to boil",
        "Combine pork, vegetables, and sauce, toss well",
      ],
      prep_time: 25,
      cook_time: 20,
      calories_per_serving: 420,
      nutrition_info: {
        protein: 24,
        carbs: 38,
        fat: 18,
        fiber: 3,
        sodium: 580,
        vitamin_c: 85,
        thiamine: 0.8,
      },
      difficulty: "intermediate",
      meal_types: ["lunch", "dinner"],
    },
    {
      cuisine: "Chinese",
      recipe_name: "Xiaolongbao",
      recipe_description: "Steamed soup dumplings with pork filling",
      ingredients: [
        { name: "All-purpose flour", quantity: 2, unit: "cups" },
        { name: "Ground pork", quantity: 0.5, unit: "lb" },
        { name: "Pork gelatin", quantity: 0.25, unit: "cup" },
        { name: "Soy sauce", quantity: 2, unit: "tbsp" },
        { name: "Shaoxing wine", quantity: 1, unit: "tbsp" },
        { name: "Ginger", quantity: 1, unit: "tbsp minced" },
        { name: "Scallions", quantity: 2, unit: "stalks" },
        { name: "Sesame oil", quantity: 1, unit: "tsp" },
      ],
      instructions: [
        "Make dough with flour and hot water, rest 30 minutes",
        "Mix pork with seasonings and chopped gelatin",
        "Roll out small circles of dough",
        "Wrap filling, pleating edges carefully",
        "Steam for 8-10 minutes until translucent",
      ],
      prep_time: 90,
      cook_time: 10,
      calories_per_serving: 320,
      nutrition_info: {
        protein: 16,
        carbs: 32,
        fat: 14,
        fiber: 1,
        sodium: 520,
        iron: 2.1,
        vitamin_b12: 0.6,
      },
      difficulty: "advanced",
      meal_types: ["lunch", "snack"],
    },
    {
      cuisine: "Chinese",
      recipe_name: "Congee",
      recipe_description: "Comforting rice porridge with toppings",
      ingredients: [
        { name: "Jasmine rice", quantity: 0.5, unit: "cup" },
        { name: "Chicken broth", quantity: 6, unit: "cups" },
        { name: "Ginger", quantity: 1, unit: "inch" },
        { name: "Scallions", quantity: 2, unit: "stalks" },
        { name: "Soy sauce", quantity: 1, unit: "tbsp" },
        { name: "Sesame oil", quantity: 1, unit: "tsp" },
        { name: "White pepper", quantity: 0.25, unit: "tsp" },
      ],
      instructions: [
        "Rinse rice and add to pot with broth and ginger",
        "Bring to boil, then simmer for 1-1.5 hours, stirring occasionally",
        "Rice should break down into creamy porridge",
        "Season with soy sauce, sesame oil, and white pepper",
        "Garnish with scallions and serve hot",
      ],
      prep_time: 10,
      cook_time: 90,
      calories_per_serving: 180,
      nutrition_info: {
        protein: 8,
        carbs: 32,
        fat: 2,
        fiber: 1,
        sodium: 680,
        vitamin_b6: 0.2,
        niacin: 3.2,
      },
      difficulty: "beginner",
      meal_types: ["breakfast", "lunch"],
    },
  ],
  Mediterranean: [
    {
      cuisine: "Mediterranean",
      recipe_name: "Greek Lemon Herb Chicken",
      recipe_description: "Tender chicken with Mediterranean herbs and lemon",
      ingredients: [
        { name: "Chicken breast", quantity: 1.5, unit: "lbs" },
        { name: "Lemon", quantity: 2, unit: "large" },
        { name: "Olive oil", quantity: 0.25, unit: "cup" },
        { name: "Oregano", quantity: 2, unit: "tsp" },
        { name: "Garlic", quantity: 4, unit: "cloves" },
        { name: "Cherry tomatoes", quantity: 1, unit: "cup" },
        { name: "Kalamata olives", quantity: 0.5, unit: "cup" },
        { name: "Feta cheese", quantity: 0.5, unit: "cup" },
      ],
      instructions: [
        "Marinate chicken in lemon juice, olive oil, and herbs for 2 hours",
        "Preheat oven to 400°F",
        "Place chicken in baking dish with tomatoes and olives",
        "Bake for 25-30 minutes until chicken is cooked through",
        "Top with crumbled feta and serve",
      ],
      prep_time: 130,
      cook_time: 30,
      calories_per_serving: 395,
      nutrition_info: {
        protein: 32,
        carbs: 8,
        fat: 26,
        fiber: 2,
        sodium: 650,
        calcium: 150,
        vitamin_c: 25,
      },
      difficulty: "beginner",
      meal_types: ["lunch", "dinner"],
    },
    {
      cuisine: "Mediterranean",
      recipe_name: "Moussaka",
      recipe_description: "Layered eggplant casserole with meat sauce and béchamel",
      ingredients: [
        { name: "Eggplant", quantity: 2, unit: "large" },
        { name: "Ground lamb", quantity: 1, unit: "lb" },
        { name: "Onion", quantity: 1, unit: "large" },
        { name: "Tomato sauce", quantity: 1, unit: "cup" },
        { name: "Red wine", quantity: 0.5, unit: "cup" },
        { name: "Cinnamon", quantity: 0.5, unit: "tsp" },
        { name: "Butter", quantity: 4, unit: "tbsp" },
        { name: "Flour", quantity: 4, unit: "tbsp" },
        { name: "Milk", quantity: 2, unit: "cups" },
        { name: "Parmesan cheese", quantity: 0.5, unit: "cup" },
      ],
      instructions: [
        "Slice and salt eggplant, let drain for 30 minutes",
        "Brown lamb with onions, add tomato sauce and wine",
        "Grill eggplant slices until golden",
        "Make béchamel sauce with butter, flour, and milk",
        "Layer eggplant, meat, and sauce, bake for 45 minutes",
      ],
      prep_time: 60,
      cook_time: 45,
      calories_per_serving: 480,
      nutrition_info: {
        protein: 28,
        carbs: 22,
        fat: 32,
        fiber: 8,
        sodium: 720,
        calcium: 280,
        iron: 3.8,
      },
      difficulty: "advanced",
      meal_types: ["lunch", "dinner"],
    },
    {
      cuisine: "Mediterranean",
      recipe_name: "Spanakopita",
      recipe_description: "Greek spinach and feta pie in phyllo pastry",
      ingredients: [
        { name: "Phyllo pastry", quantity: 1, unit: "package" },
        { name: "Spinach", quantity: 2, unit: "lbs fresh" },
        { name: "Feta cheese", quantity: 8, unit: "oz" },
        { name: "Ricotta cheese", quantity: 1, unit: "cup" },
        { name: "Eggs", quantity: 3, unit: "large" },
        { name: "Onion", quantity: 1, unit: "large" },
        { name: "Dill", quantity: 0.25, unit: "cup fresh" },
        { name: "Olive oil", quantity: 0.5, unit: "cup" },
      ],
      instructions: [
        "Sauté onions until soft, add spinach until wilted",
        "Mix spinach with cheeses, eggs, and dill",
        "Layer half the phyllo sheets, brushing with oil",
        "Add filling, top with remaining phyllo",
        "Bake at 375°F for 45 minutes until golden",
      ],
      prep_time: 45,
      cook_time: 45,
      calories_per_serving: 380,
      nutrition_info: {
        protein: 16,
        carbs: 28,
        fat: 24,
        fiber: 4,
        sodium: 680,
        calcium: 320,
        vitamin_k: 180,
      },
      difficulty: "intermediate",
      meal_types: ["lunch", "dinner"],
    },
    {
      cuisine: "Mediterranean",
      recipe_name: "Paella",
      recipe_description: "Spanish rice dish with seafood and saffron",
      ingredients: [
        { name: "Bomba rice", quantity: 2, unit: "cups" },
        { name: "Shrimp", quantity: 0.5, unit: "lb" },
        { name: "Mussels", quantity: 1, unit: "lb" },
        { name: "Chicken thigh", quantity: 0.5, unit: "lb" },
        { name: "Saffron", quantity: 0.5, unit: "tsp" },
        { name: "Chicken broth", quantity: 4, unit: "cups" },
        { name: "Tomato", quantity: 1, unit: "large" },
        { name: "Bell pepper", quantity: 1, unit: "red" },
        { name: "Green beans", quantity: 1, unit: "cup" },
        { name: "Olive oil", quantity: 0.25, unit: "cup" },
      ],
      instructions: [
        "Heat oil in paella pan, brown chicken",
        "Add vegetables and cook until soft",
        "Add rice, stir to coat with oil",
        "Add hot saffron broth, don't stir after this point",
        "Add seafood in final 10 minutes, rest before serving",
      ],
      prep_time: 30,
      cook_time: 40,
      calories_per_serving: 520,
      nutrition_info: {
        protein: 32,
        carbs: 58,
        fat: 16,
        fiber: 3,
        sodium: 890,
        selenium: 42,
        vitamin_c: 65,
      },
      difficulty: "advanced",
      meal_types: ["lunch", "dinner"],
    },
  ],
  Mexican: [
    {
      cuisine: "Mexican",
      recipe_name: "Huevos Rancheros",
      recipe_description: "Fried eggs on tortillas with spicy tomato sauce",
      ingredients: [
        { name: "Corn tortillas", quantity: 4, unit: "pieces" },
        { name: "Eggs", quantity: 4, unit: "large" },
        { name: "Tomatoes", quantity: 3, unit: "medium" },
        { name: "Onion", quantity: 0.5, unit: "medium" },
        { name: "Jalapeño", quantity: 1, unit: "small" },
        { name: "Garlic", quantity: 2, unit: "cloves" },
        { name: "Cumin", quantity: 0.5, unit: "tsp" },
        { name: "Avocado", quantity: 1, unit: "large" },
        { name: "Cilantro", quantity: 0.25, unit: "cup" },
        { name: "Lime", quantity: 1, unit: "large" },
      ],
      instructions: [
        "Char tomatoes, onion, and jalapeño until blackened",
        "Blend charred vegetables with garlic and cumin",
        "Simmer sauce for 15 minutes until thickened",
        "Warm tortillas and fry eggs sunny-side up",
        "Serve eggs on tortillas with sauce, avocado, and cilantro",
      ],
      prep_time: 20,
      cook_time: 25,
      calories_per_serving: 380,
      nutrition_info: {
        protein: 16,
        carbs: 32,
        fat: 22,
        fiber: 8,
        sodium: 420,
        vitamin_c: 28,
        folate: 120,
      },
      difficulty: "beginner",
      meal_types: ["breakfast", "lunch"],
    },
    {
      cuisine: "Mexican",
      recipe_name: "Carnitas",
      recipe_description: "Slow-cooked pulled pork with Mexican spices",
      ingredients: [
        { name: "Pork shoulder", quantity: 3, unit: "lbs" },
        { name: "Orange", quantity: 2, unit: "large" },
        { name: "Lime", quantity: 2, unit: "large" },
        { name: "Onion", quantity: 1, unit: "large" },
        { name: "Garlic", quantity: 6, unit: "cloves" },
        { name: "Bay leaves", quantity: 3, unit: "pieces" },
        { name: "Cumin", quantity: 2, unit: "tsp" },
        { name: "Oregano", quantity: 1, unit: "tsp" },
        { name: "Lard", quantity: 2, unit: "tbsp" },
      ],
      instructions: [
        "Cut pork into large chunks, season with salt",
        "Brown pork in lard in Dutch oven",
        "Add citrus juice, onion, garlic, and spices",
        "Cover and braise at 325°F for 2.5 hours",
        "Shred meat and crisp under broiler before serving",
      ],
      prep_time: 20,
      cook_time: 180,
      calories_per_serving: 420,
      nutrition_info: {
        protein: 35,
        carbs: 8,
        fat: 28,
        fiber: 2,
        sodium: 580,
        vitamin_c: 45,
        thiamine: 0.9,
      },
      difficulty: "intermediate",
      meal_types: ["lunch", "dinner"],
    },
    {
      cuisine: "Mexican",
      recipe_name: "Chiles Rellenos",
      recipe_description: "Roasted poblano peppers stuffed with cheese",
      ingredients: [
        { name: "Poblano peppers", quantity: 6, unit: "large" },
        { name: "Monterey Jack cheese", quantity: 8, unit: "oz" },
        { name: "Eggs", quantity: 6, unit: "large separated" },
        { name: "All-purpose flour", quantity: 0.25, unit: "cup" },
        { name: "Vegetable oil", quantity: 2, unit: "cups" },
        { name: "Tomatoes", quantity: 4, unit: "medium" },
        { name: "Onion", quantity: 0.5, unit: "medium" },
        { name: "Chicken broth", quantity: 1, unit: "cup" },
      ],
      instructions: [
        "Char poblanos over flame until blackened all over",
        "Steam in bag, then peel and make small slit",
        "Stuff with cheese, dust with flour",
        "Beat egg whites to peaks, fold in yolks",
        "Dip peppers in egg batter and fry until golden",
      ],
      prep_time: 45,
      cook_time: 30,
      calories_per_serving: 450,
      nutrition_info: {
        protein: 20,
        carbs: 18,
        fat: 34,
        fiber: 4,
        sodium: 520,
        calcium: 380,
        vitamin_a: 850,
      },
      difficulty: "advanced",
      meal_types: ["lunch", "dinner"],
    },
  ],
  Japanese: [
    {
      cuisine: "Japanese",
      recipe_name: "Chicken Teriyaki",
      recipe_description: "Glazed chicken with sweet soy-based sauce",
      ingredients: [
        { name: "Chicken thigh", quantity: 1.5, unit: "lbs" },
        { name: "Soy sauce", quantity: 0.25, unit: "cup" },
        { name: "Mirin", quantity: 0.25, unit: "cup" },
        { name: "Sake", quantity: 2, unit: "tbsp" },
        { name: "Sugar", quantity: 2, unit: "tbsp" },
        { name: "Ginger", quantity: 1, unit: "inch" },
        { name: "Garlic", quantity: 2, unit: "cloves" },
        { name: "Scallions", quantity: 2, unit: "stalks" },
      ],
      instructions: [
        "Score chicken skin and season with salt",
        "Pan-fry chicken skin-side down until crispy",
        "Flip and cook until almost done",
        "Add teriyaki sauce ingredients to pan",
        "Glaze chicken until sauce thickens and coats",
      ],
      prep_time: 15,
      cook_time: 20,
      calories_per_serving: 380,
      nutrition_info: {
        protein: 32,
        carbs: 18,
        fat: 20,
        fiber: 0,
        sodium: 1120,
        niacin: 8.5,
        selenium: 24,
      },
      difficulty: "beginner",
      meal_types: ["lunch", "dinner"],
    },
    {
      cuisine: "Japanese",
      recipe_name: "Ramen",
      recipe_description: "Rich pork bone broth with noodles and toppings",
      ingredients: [
        { name: "Ramen noodles", quantity: 4, unit: "portions" },
        { name: "Pork bones", quantity: 2, unit: "lbs" },
        { name: "Pork belly", quantity: 0.5, unit: "lb" },
        { name: "Eggs", quantity: 4, unit: "large" },
        { name: "Scallions", quantity: 4, unit: "stalks" },
        { name: "Nori", quantity: 4, unit: "sheets" },
        { name: "Miso paste", quantity: 3, unit: "tbsp" },
        { name: "Garlic", quantity: 4, unit: "cloves" },
        { name: "Ginger", quantity: 2, unit: "inches" },
      ],
      instructions: [
        "Simmer pork bones for 12+ hours to make rich broth",
        "Braise pork belly in soy sauce mixture",
        "Soft-boil eggs and marinate in soy sauce",
        "Cook ramen noodles according to package",
        "Assemble bowls with broth, noodles, and toppings",
      ],
      prep_time: 60,
      cook_time: 720,
      calories_per_serving: 680,
      nutrition_info: {
        protein: 35,
        carbs: 58,
        fat: 32,
        fiber: 4,
        sodium: 1580,
        vitamin_b12: 1.2,
        phosphorus: 420,
      },
      difficulty: "advanced",
      meal_types: ["lunch", "dinner"],
    },
    {
      cuisine: "Japanese",
      recipe_name: "Sushi Rolls",
      recipe_description: "Fresh fish and vegetables wrapped in seasoned rice",
      ingredients: [
        { name: "Sushi rice", quantity: 2, unit: "cups" },
        { name: "Rice vinegar", quantity: 0.25, unit: "cup" },
        { name: "Sugar", quantity: 2, unit: "tbsp" },
        { name: "Salt", quantity: 1, unit: "tsp" },
        { name: "Nori sheets", quantity: 6, unit: "pieces" },
        { name: "Salmon fillet", quantity: 0.5, unit: "lb" },
        { name: "Cucumber", quantity: 1, unit: "large" },
        { name: "Avocado", quantity: 2, unit: "large" },
        { name: "Wasabi", quantity: 2, unit: "tbsp" },
      ],
      instructions: [
        "Cook sushi rice and season with vinegar mixture",
        "Cut fish and vegetables into strips",
        "Place nori on bamboo mat, spread rice evenly",
        "Add fillings and roll tightly using mat",
        "Slice with sharp wet knife and serve with wasabi",
      ],
      prep_time: 45,
      cook_time: 20,
      calories_per_serving: 320,
      nutrition_info: {
        protein: 18,
        carbs: 48,
        fat: 8,
        fiber: 6,
        sodium: 680,
        omega_3: 1.2,
        vitamin_e: 3.2,
      },
      difficulty: "intermediate",
      meal_types: ["lunch", "dinner"],
    },
  ],
  Italian: [
    {
      cuisine: "Italian",
      recipe_name: "Carbonara",
      recipe_description: "Creamy pasta with eggs, cheese, and pancetta",
      ingredients: [
        { name: "Spaghetti", quantity: 1, unit: "lb" },
        { name: "Pancetta", quantity: 6, unit: "oz" },
        { name: "Eggs", quantity: 4, unit: "large" },
        { name: "Pecorino Romano", quantity: 1, unit: "cup grated" },
        { name: "Black pepper", quantity: 2, unit: "tsp" },
        { name: "Garlic", quantity: 2, unit: "cloves" },
        { name: "White wine", quantity: 0.25, unit: "cup" },
      ],
      instructions: [
        "Cook pasta in salted water until al dente",
        "Render pancetta until crispy, add garlic briefly",
        "Whisk eggs with cheese and black pepper",
        "Toss hot pasta with pancetta and wine",
        "Remove from heat, add egg mixture, toss quickly",
      ],
      prep_time: 15,
      cook_time: 15,
      calories_per_serving: 520,
      nutrition_info: {
        protein: 24,
        carbs: 58,
        fat: 22,
        fiber: 3,
        sodium: 680,
        calcium: 280,
        vitamin_b12: 0.8,
      },
      difficulty: "intermediate",
      meal_types: ["lunch", "dinner"],
    },
    {
      cuisine: "Italian",
      recipe_name: "Osso Buco",
      recipe_description: "Braised veal shanks with vegetables and wine",
      ingredients: [
        { name: "Veal shanks", quantity: 4, unit: "pieces" },
        { name: "Flour", quantity: 0.5, unit: "cup" },
        { name: "Onion", quantity: 1, unit: "large" },
        { name: "Carrots", quantity: 2, unit: "large" },
        { name: "Celery", quantity: 2, unit: "stalks" },
        { name: "White wine", quantity: 1, unit: "cup" },
        { name: "Beef broth", quantity: 2, unit: "cups" },
        { name: "Canned tomatoes", quantity: 1, unit: "can" },
        { name: "Lemon zest", quantity: 1, unit: "tbsp" },
        { name: "Parsley", quantity: 0.25, unit: "cup" },
      ],
      instructions: [
        "Dredge veal shanks in flour and brown on all sides",
        "Sauté vegetables until soft",
        "Add wine and reduce by half",
        "Add tomatoes and broth, return veal to pot",
        "Braise covered for 2 hours until tender",
      ],
      prep_time: 30,
      cook_time: 150,
      calories_per_serving: 480,
      nutrition_info: {
        protein: 42,
        carbs: 18,
        fat: 24,
        fiber: 4,
        sodium: 720,
        iron: 4.2,
        zinc: 6.8,
      },
      difficulty: "advanced",
      meal_types: ["lunch", "dinner"],
    },
    {
      cuisine: "Italian",
      recipe_name: "Margherita Pizza",
      recipe_description: "Classic pizza with tomato, mozzarella, and basil",
      ingredients: [
        { name: "Pizza dough", quantity: 1, unit: "lb" },
        { name: "San Marzano tomatoes", quantity: 1, unit: "can" },
        { name: "Fresh mozzarella", quantity: 8, unit: "oz" },
        { name: "Fresh basil", quantity: 0.25, unit: "cup" },
        { name: "Olive oil", quantity: 3, unit: "tbsp" },
        { name: "Garlic", quantity: 2, unit: "cloves" },
        { name: "Salt", quantity: 1, unit: "tsp" },
        { name: "Semolina flour", quantity: 2, unit: "tbsp" },
      ],
      instructions: [
        "Preheat oven to 500°F with pizza stone",
        "Crush tomatoes with garlic and salt for sauce",
        "Stretch dough into 12-inch circle",
        "Spread sauce, add torn mozzarella",
        "Bake for 10-12 minutes, add basil after baking",
      ],
      prep_time: 20,
      cook_time: 12,
      calories_per_serving: 420,
      nutrition_info: {
        protein: 18,
        carbs: 52,
        fat: 16,
        fiber: 3,
        sodium: 890,
        calcium: 320,
        lycopene: 8.2,
      },
      difficulty: "intermediate",
      meal_types: ["lunch", "dinner"],
    },
  ],
  Korean: [
    {
      cuisine: "Korean",
      recipe_name: "Bibimbap",
      recipe_description: "Mixed rice bowl with vegetables and gochujang",
      ingredients: [
        { name: "Short grain rice", quantity: 2, unit: "cups" },
        { name: "Beef bulgogi", quantity: 0.5, unit: "lb" },
        { name: "Spinach", quantity: 1, unit: "bunch" },
        { name: "Bean sprouts", quantity: 2, unit: "cups" },
        { name: "Carrots", quantity: 2, unit: "medium" },
        { name: "Shiitake mushrooms", quantity: 6, unit: "pieces" },
        { name: "Eggs", quantity: 4, unit: "large" },
        { name: "Gochujang", quantity: 3, unit: "tbsp" },
        { name: "Sesame oil", quantity: 2, unit: "tbsp" },
      ],
      instructions: [
        "Cook rice and keep warm",
        "Blanch and season each vegetable separately",
        "Cook marinated beef until caramelized",
        "Fry eggs sunny-side up",
        "Arrange components over rice, serve with gochujang",
      ],
      prep_time: 45,
      cook_time: 30,
      calories_per_serving: 520,
      nutrition_info: {
        protein: 28,
        carbs: 68,
        fat: 16,
        fiber: 8,
        sodium: 980,
        vitamin_a: 920,
        iron: 4.8,
      },
      difficulty: "intermediate",
      meal_types: ["lunch", "dinner"],
    },
    {
      cuisine: "Korean",
      recipe_name: "Kimchi Jjigae",
      recipe_description: "Spicy kimchi stew with pork and tofu",
      ingredients: [
        { name: "Aged kimchi", quantity: 2, unit: "cups" },
        { name: "Pork belly", quantity: 0.5, unit: "lb" },
        { name: "Firm tofu", quantity: 8, unit: "oz" },
        { name: "Onion", quantity: 1, unit: "medium" },
        { name: "Scallions", quantity: 3, unit: "stalks" },
        { name: "Gochugaru", quantity: 1, unit: "tbsp" },
        { name: "Garlic", quantity: 4, unit: "cloves" },
        { name: "Anchovy broth", quantity: 3, unit: "cups" },
      ],
      instructions: [
        "Sauté pork belly until fat renders",
        "Add kimchi and cook until fragrant",
        "Add broth and bring to boil",
        "Add tofu and simmer for 15 minutes",
        "Garnish with scallions and serve with rice",
      ],
      prep_time: 15,
      cook_time: 25,
      calories_per_serving: 380,
      nutrition_info: {
        protein: 22,
        carbs: 12,
        fat: 28,
        fiber: 4,
        sodium: 1280,
        probiotics: 1000000,
        vitamin_c: 35,
      },
      difficulty: "beginner",
      meal_types: ["lunch", "dinner"],
    },
  ],
}

export function calculateAccurateNutrition(
  ingredients: Array<{ name: string; quantity: number; unit: string }>,
  servings = 1,
) {
  // Comprehensive nutrition database per 100g
  const nutritionDB: Record<string, any> = {
    // Proteins
    "chicken breast": { calories: 165, protein: 31, carbs: 0, fat: 3.6, fiber: 0, sodium: 74 },
    "chicken thigh": { calories: 209, protein: 26, carbs: 0, fat: 11, fiber: 0, sodium: 84 },
    "salmon fillet": { calories: 208, protein: 25, carbs: 0, fat: 12, fiber: 0, sodium: 59 },
    "ground pork": { calories: 263, protein: 18, carbs: 0, fat: 21, fiber: 0, sodium: 62 },
    "pork shoulder": { calories: 294, protein: 20, carbs: 0, fat: 23, fiber: 0, sodium: 58 },
    "pork belly": { calories: 518, protein: 9, carbs: 0, fat: 53, fiber: 0, sodium: 12 },
    "ground lamb": { calories: 283, protein: 17, carbs: 0, fat: 23, fiber: 0, sodium: 72 },
    "veal shanks": { calories: 196, protein: 31, carbs: 0, fat: 7, fiber: 0, sodium: 82 },
    "beef bulgogi": { calories: 250, protein: 26, carbs: 2, fat: 15, fiber: 0, sodium: 480 },
    eggs: { calories: 155, protein: 13, carbs: 1.1, fat: 11, fiber: 0, sodium: 124 },
    "silken tofu": { calories: 55, protein: 5.3, carbs: 2.7, fat: 2.7, fiber: 0.2, sodium: 7 },
    "firm tofu": { calories: 76, protein: 8, carbs: 1.9, fat: 4.8, fiber: 0.3, sodium: 7 },
    shrimp: { calories: 99, protein: 18, carbs: 0.9, fat: 1.4, fiber: 0, sodium: 111 },
    mussels: { calories: 86, protein: 12, carbs: 7, fat: 2.2, fiber: 0, sodium: 286 },
    pancetta: { calories: 476, protein: 21, carbs: 0, fat: 42, fiber: 0, sodium: 1480 },

    // Grains & Starches
    "jasmine rice": { calories: 130, protein: 2.7, carbs: 28, fat: 0.3, fiber: 0.4, sodium: 1 },
    "basmati rice": { calories: 121, protein: 2.6, carbs: 25, fat: 0.4, fiber: 0.7, sodium: 1 },
    "bomba rice": { calories: 130, protein: 2.7, carbs: 28, fat: 0.3, fiber: 0.4, sodium: 1 },
    "short grain rice": { calories: 130, protein: 2.4, carbs: 28, fat: 0.3, fiber: 0.4, sodium: 1 },
    "glutinous rice": { calories: 97, protein: 2, carbs: 22, fat: 0.2, fiber: 1, sodium: 1 },
    "sushi rice": { calories: 130, protein: 2.4, carbs: 28, fat: 0.3, fiber: 0.4, sodium: 1 },
    quinoa: { calories: 120, protein: 4.4, carbs: 22, fat: 1.9, fiber: 2.8, sodium: 7 },
    "whole wheat flour": { calories: 340, protein: 13, carbs: 72, fat: 2.5, fiber: 11, sodium: 2 },
    "all-purpose flour": { calories: 364, protein: 10, carbs: 76, fat: 1, fiber: 2.7, sodium: 2 },
    "rice noodles": { calories: 192, protein: 1.6, carbs: 44, fat: 0.4, fiber: 1.6, sodium: 103 },
    "ramen noodles": { calories: 436, protein: 9, carbs: 58, fat: 18, fiber: 2.4, sodium: 1820 },
    spaghetti: { calories: 131, protein: 5, carbs: 25, fat: 1.1, fiber: 1.8, sodium: 1 },
    "corn tortillas": { calories: 218, protein: 5.7, carbs: 45, fat: 2.9, fiber: 6.3, sodium: 15 },
    "pizza dough": { calories: 275, protein: 9, carbs: 56, fat: 1.2, fiber: 2.2, sodium: 535 },

    // Vegetables
    broccoli: { calories: 34, protein: 2.8, carbs: 7, fat: 0.4, fiber: 2.6, sodium: 33 },
    "bell pepper": { calories: 31, protein: 1, carbs: 7, fat: 0.3, fiber: 2.5, sodium: 4 },
    "red bell pepper": { calories: 31, protein: 1, carbs: 7, fat: 0.3, fiber: 2.5, sodium: 4 },
    onion: { calories: 40, protein: 1.1, carbs: 9, fat: 0.1, fiber: 1.7, sodium: 4 },
    tomato: { calories: 18, protein: 0.9, carbs: 3.9, fat: 0.2, fiber: 1.2, sodium: 5 },
    "cherry tomatoes": { calories: 18, protein: 0.9, carbs: 3.9, fat: 0.2, fiber: 1.2, sodium: 5 },
    "san marzano tomatoes": { calories: 18, protein: 0.9, carbs: 3.9, fat: 0.2, fiber: 1.2, sodium: 5 },
    "tomato puree": { calories: 38, protein: 1.6, carbs: 9, fat: 0.2, fiber: 1.4, sodium: 24 },
    "tomato sauce": { calories: 29, protein: 1.6, carbs: 7, fat: 0.2, fiber: 1.4, sodium: 321 },
    "canned tomatoes": { calories: 18, protein: 0.9, carbs: 4.2, fat: 0.1, fiber: 1.2, sodium: 130 },
    avocado: { calories: 160, protein: 2, carbs: 9, fat: 15, fiber: 7, sodium: 7 },
    spinach: { calories: 23, protein: 2.9, carbs: 3.6, fat: 0.4, fiber: 2.2, sodium: 79 },
    eggplant: { calories: 25, protein: 1, carbs: 6, fat: 0.2, fiber: 3, sodium: 2 },
    "thai eggplant": { calories: 25, protein: 1, carbs: 6, fat: 0.2, fiber: 3, sodium: 2 },
    "poblano peppers": { calories: 20, protein: 1, carbs: 4, fat: 0.1, fiber: 2, sodium: 3 },
    jalapeño: { calories: 29, protein: 0.9, carbs: 6, fat: 0.4, fiber: 2.8, sodium: 3 },
    "thai chilies": { calories: 40, protein: 1.9, carbs: 8.8, fat: 0.4, fiber: 1.5, sodium: 9 },
    "green chili": { calories: 40, protein: 1.9, carbs: 8.8, fat: 0.4, fiber: 1.5, sodium: 9 },
    "dried chilies": { calories: 324, protein: 12, carbs: 69, fat: 6, fiber: 28, sodium: 91 },
    cucumber: { calories: 16, protein: 0.7, carbs: 4, fat: 0.1, fiber: 0.5, sodium: 2 },
    carrots: { calories: 41, protein: 0.9, carbs: 10, fat: 0.2, fiber: 2.8, sodium: 69 },
    celery: { calories: 14, protein: 0.7, carbs: 3, fat: 0.2, fiber: 1.6, sodium: 80 },
    "bean sprouts": { calories: 23, protein: 3.2, carbs: 4, fat: 0.2, fiber: 1.8, sodium: 6 },
    "green beans": { calories: 31, protein: 1.8, carbs: 7, fat: 0.2, fiber: 2.7, sodium: 6 },
    mushrooms: { calories: 22, protein: 3.1, carbs: 3.3, fat: 0.3, fiber: 1, sodium: 5 },
    "shiitake mushrooms": { calories: 34, protein: 2.2, carbs: 6.8, fat: 0.5, fiber: 2.5, sodium: 9 },
    potatoes: { calories: 77, protein: 2, carbs: 17, fat: 0.1, fiber: 2.2, sodium: 6 },
    garlic: { calories: 149, protein: 6.4, carbs: 33, fat: 0.5, fiber: 2.1, sodium: 17 },
    ginger: { calories: 80, protein: 1.8, carbs: 18, fat: 0.8, fiber: 2, sodium: 13 },
    "ginger-garlic paste": { calories: 120, protein: 4, carbs: 25, fat: 0.6, fiber: 2, sodium: 15 },
    lemongrass: { calories: 99, protein: 1.8, carbs: 25, fat: 0.5, fiber: 2.8, sodium: 6 },
    galangal: { calories: 71, protein: 1, carbs: 15, fat: 0.3, fiber: 2.1, sodium: 15 },

    // Fruits
    mango: { calories: 60, protein: 0.8, carbs: 15, fat: 0.4, fiber: 1.6, sodium: 1 },
    "pineapple chunks": { calories: 50, protein: 0.5, carbs: 13, fat: 0.1, fiber: 1.4, sodium: 1 },
    lemon: { calories: 29, protein: 1.1, carbs: 9, fat: 0.3, fiber: 2.8, sodium: 2 },
    lime: { calories: 30, protein: 0.7, carbs: 11, fat: 0.2, fiber: 2.8, sodium: 2 },
    orange: { calories: 47, protein: 0.9, carbs: 12, fat: 0.1, fiber: 2.4, sodium: 0 },

    // Dairy & Eggs
    "feta cheese": { calories: 264, protein: 14, carbs: 4, fat: 21, fiber: 0, sodium: 1116 },
    "monterey jack cheese": { calories: 373, protein: 25, carbs: 0.7, fat: 30, fiber: 0, sodium: 600 },
    "fresh mozzarella": { calories: 280, protein: 18, carbs: 3, fat: 22, fiber: 0, sodium: 373 },
    "pecorino romano": { calories: 387, protein: 32, carbs: 0, fat: 27, fiber: 0, sodium: 1200 },
    "parmesan cheese": { calories: 431, protein: 38, carbs: 4, fat: 29, fiber: 0, sodium: 1529 },
    "ricotta cheese": { calories: 174, protein: 11, carbs: 3, fat: 13, fiber: 0, sodium: 84 },
    yogurt: { calories: 59, protein: 10, carbs: 3.6, fat: 0.4, fiber: 0, sodium: 36 },
    "heavy cream": { calories: 345, protein: 2.1, carbs: 2.8, fat: 37, fiber: 0, sodium: 38 },
    milk: { calories: 42, protein: 3.4, carbs: 5, fat: 1, fiber: 0, sodium: 40 },
    butter: { calories: 717, protein: 0.9, carbs: 0.1, fat: 81, fiber: 0, sodium: 11 },
    ghee: { calories: 900, protein: 0, carbs: 0, fat: 100, fiber: 0, sodium: 0 },

    // Oils & Fats
    "olive oil": { calories: 884, protein: 0, carbs: 0, fat: 100, fiber: 0, sodium: 2 },
    "vegetable oil": { calories: 884, protein: 0, carbs: 0, fat: 100, fiber: 0, sodium: 0 },
    "sesame oil": { calories: 884, protein: 0, carbs: 0, fat: 100, fiber: 0, sodium: 0 },
    oil: { calories: 884, protein: 0, carbs: 0, fat: 100, fiber: 0, sodium: 0 },
    lard: { calories: 902, protein: 0, carbs: 0, fat: 100, fiber: 0, sodium: 0 },

    // Legumes & Nuts
    "yellow lentils": { calories: 116, protein: 9, carbs: 20, fat: 0.4, fiber: 8, sodium: 2 },
    peanuts: { calories: 567, protein: 26, carbs: 16, fat: 49, fiber: 8.5, sodium: 18 },
    "toasted sesame seeds": { calories: 573, protein: 18, carbs: 23, fat: 50, fiber: 12, sodium: 11 },
    "kalamata olives": { calories: 115, protein: 0.8, carbs: 6, fat: 11, fiber: 3.2, sodium: 735 },

    // Herbs & Spices
    "thai basil": { calories: 22, protein: 3.2, carbs: 2.6, fat: 0.6, fiber: 1.6, sodium: 4 },
    "fresh basil": { calories: 22, protein: 3.2, carbs: 2.6, fat: 0.6, fiber: 1.6, sodium: 4 },
    "mint leaves": { calories: 70, protein: 3.8, carbs: 14, fat: 0.9, fiber: 8, sodium: 31 },
    "coriander leaves": { calories: 23, protein: 2.1, carbs: 3.7, fat: 0.5, fiber: 2.8, sodium: 46 },
    cilantro: { calories: 23, protein: 2.1, carbs: 3.7, fat: 0.5, fiber: 2.8, sodium: 46 },
    parsley: { calories: 36, protein: 3, carbs: 6.3, fat: 0.8, fiber: 3.3, sodium: 56 },
    dill: { calories: 43, protein: 3.5, carbs: 7, fat: 1.1, fiber: 2.1, sodium: 61 },
    scallions: { calories: 32, protein: 1.8, carbs: 7.3, fat: 0.2, fiber: 2.6, sodium: 16 },
    "curry leaves": { calories: 108, protein: 6.1, carbs: 18.7, fat: 1, fiber: 6.4, sodium: 24 },
    "kaffir lime leaves": { calories: 25, protein: 0.8, carbs: 6, fat: 0.2, fiber: 2, sodium: 2 },

    // Condiments & Sauces
    "soy sauce": { calories: 8, protein: 1.3, carbs: 0.8, fat: 0, fiber: 0.1, sodium: 879 },
    "fish sauce": { calories: 35, protein: 5.1, carbs: 3.5, fat: 0, fiber: 0, sodium: 1413 },
    "rice vinegar": { calories: 18, protein: 0, carbs: 0.4, fat: 0, fiber: 0, sodium: 2 },
    "tamarind paste": { calories: 239, protein: 2.8, carbs: 62, fat: 0.6, fiber: 5.1, sodium: 28 },
    "palm sugar": { calories: 383, protein: 0.4, carbs: 99, fat: 0, fiber: 0, sodium: 9 },
    mirin: { calories: 241, protein: 0.1, carbs: 43, fat: 0, fiber: 0, sodium: 2 },
    sake: { calories: 134, protein: 0.5, carbs: 5, fat: 0, fiber: 0, sodium: 1 },
    "white wine": { calories: 82, protein: 0.1, carbs: 2.6, fat: 0, fiber: 0, sodium: 5 },
    "red wine": { calories: 85, protein: 0.1, carbs: 2.6, fat: 0, fiber: 0, sodium: 6 },
    ketchup: { calories: 112, protein: 1.7, carbs: 27, fat: 0.1, fiber: 0.4, sodium: 1110 },
    doubanjiang: { calories: 60, protein: 3, carbs: 8, fat: 2, fiber: 2, sodium: 2000 },
    "green curry paste": { calories: 65, protein: 2, carbs: 8, fat: 3, fiber: 2, sodium: 890 },
    "biryani masala": { calories: 325, protein: 11, carbs: 54, fat: 9, fiber: 26, sodium: 45 },
    "garam masala": { calories: 379, protein: 16, carbs: 50, fat: 15, fiber: 24, sodium: 107 },
    gochujang: { calories: 243, protein: 5, carbs: 49, fat: 3, fiber: 5, sodium: 2150 },
    gochugaru: { calories: 282, protein: 12, carbs: 56, fat: 5, fiber: 29, sodium: 2300 },
    miso: { calories: 199, protein: 12, carbs: 26, fat: 6, fiber: 5.4, sodium: 3728 },
    wasabi: { calories: 109, protein: 4.8, carbs: 24, fat: 0.6, fiber: 7.8, sodium: 17 },

    // Spices & Seasonings
    turmeric: { calories: 354, protein: 7.8, carbs: 65, fat: 10, fiber: 21, sodium: 38 },
    "turmeric powder": { calories: 354, protein: 7.8, carbs: 65, fat: 10, fiber: 21, sodium: 38 },
    cumin: { calories: 375, protein: 18, carbs: 44, fat: 22, fiber: 11, sodium: 168 },
    "cumin seeds": { calories: 375, protein: 18, carbs: 44, fat: 22, fiber: 11, sodium: 168 },
    "cumin powder": { calories: 375, protein: 18, carbs: 44, fat: 22, fiber: 11, sodium: 168 },
    "mustard seeds": { calories: 508, protein: 26, carbs: 28, fat: 36, fiber: 12, sodium: 13 },
    "coriander powder": { calories: 298, protein: 12, carbs: 55, fat: 17, fiber: 42, sodium: 35 },
    "red chili powder": { calories: 282, protein: 12, carbs: 56, fat: 5, fiber: 29, sodium: 91 },
    paprika: { calories: 282, protein: 14, carbs: 54, fat: 13, fiber: 35, sodium: 68 },
    cinnamon: { calories: 247, protein: 4, carbs: 81, fat: 1.2, fiber: 53, sodium: 10 },
    oregano: { calories: 265, protein: 9, carbs: 69, fat: 4.3, fiber: 43, sodium: 25 },
    "black pepper": { calories: 251, protein: 10, carbs: 64, fat: 3.3, fiber: 26, sodium: 20 },
    "white pepper": { calories: 296, protein: 11, carbs: 69, fat: 2.1, fiber: 26, sodium: 5 },
    "sichuan peppercorns": { calories: 258, protein: 6, carbs: 52, fat: 7, fiber: 17, sodium: 12 },
    "bay leaves": { calories: 313, protein: 7.6, carbs: 75, fat: 8.4, fiber: 26, sodium: 23 },
    saffron: { calories: 310, protein: 11, carbs: 65, fat: 5.9, fiber: 3.9, sodium: 148 },
    salt: { calories: 0, protein: 0, carbs: 0, fat: 0, fiber: 0, sodium: 38758 },
    sugar: { calories: 387, protein: 0, carbs: 100, fat: 0, fiber: 0, sodium: 0 },

    // Specialty Items
    "dosa batter": { calories: 85, protein: 3, carbs: 17, fat: 0.5, fiber: 1, sodium: 5 },
    "phyllo pastry": { calories: 299, protein: 6, carbs: 51, fat: 7, fiber: 2, sodium: 439 },
    "pork gelatin": { calories: 355, protein: 85, carbs: 0, fat: 1, fiber: 0, sodium: 196 },
    nori: { calories: 35, protein: 5.8, carbs: 5.1, fat: 0.3, fiber: 0.3, sodium: 48 },
    "coconut milk": { calories: 230, protein: 2.3, carbs: 6, fat: 24, fiber: 0, sodium: 15 },
    "chicken broth": { calories: 15, protein: 1, carbs: 1, fat: 0.5, fiber: 0, sodium: 343 },
    "beef broth": { calories: 17, protein: 3, carbs: 0, fat: 0.5, fiber: 0, sodium: 343 },
    "anchovy broth": { calories: 20, protein: 4, carbs: 0, fat: 0.5, fiber: 0, sodium: 400 },
    "aged kimchi": { calories: 15, protein: 1.1, carbs: 2.4, fat: 0.5, fiber: 1.6, sodium: 498 },
    cornstarch: { calories: 381, protein: 0.3, carbs: 91, fat: 0.1, fiber: 0.9, sodium: 9 },
    flour: { calories: 364, protein: 10, carbs: 76, fat: 1, fiber: 2.7, sodium: 2 },
    "semolina flour": { calories: 360, protein: 13, carbs: 73, fat: 1.1, fiber: 3.9, sodium: 2 },
  }

  const totalNutrition = {
    calories: 0,
    protein: 0,
    carbs: 0,
    fat: 0,
    fiber: 0,
    sodium: 0,
  }

  ingredients.forEach((ingredient) => {
    const key = ingredient.name.toLowerCase()
    const nutrition = nutritionDB[key]

    if (nutrition) {
      // Convert quantity to grams (improved conversion)
      let grams = ingredient.quantity * 100 // Default assumption

      // Unit conversions
      if (ingredient.unit.includes("cup")) {
        if (key.includes("rice") || key.includes("flour") || key.includes("sugar")) {
          grams = ingredient.quantity * 200 // Dense ingredients
        } else if (key.includes("oil") || key.includes("liquid")) {
          grams = ingredient.quantity * 240 // Liquids
        } else {
          grams = ingredient.quantity * 150 // Average for vegetables/fruits
        }
      } else if (ingredient.unit.includes("tbsp")) {
        grams = ingredient.quantity * 15
      } else if (ingredient.unit.includes("tsp")) {
        grams = ingredient.quantity * 5
      } else if (ingredient.unit.includes("oz")) {
        grams = ingredient.quantity * 28.35
      } else if (ingredient.unit.includes("lb")) {
        grams = ingredient.quantity * 453.592
      } else if (
        ingredient.unit.includes("large") ||
        ingredient.unit.includes("medium") ||
        ingredient.unit.includes("small")
      ) {
        // Estimate weights for common items
        if (key.includes("egg")) grams = ingredient.quantity * 50
        else if (key.includes("onion")) grams = ingredient.quantity * 150
        else if (key.includes("tomato")) grams = ingredient.quantity * 120
        else if (key.includes("potato")) grams = ingredient.quantity * 150
        else if (key.includes("bell pepper")) grams = ingredient.quantity * 120
        else if (key.includes("lemon") || key.includes("lime")) grams = ingredient.quantity * 60
        else if (key.includes("orange")) grams = ingredient.quantity * 150
        else if (key.includes("mango")) grams = ingredient.quantity * 200
        else if (key.includes("avocado")) grams = ingredient.quantity * 150
        else grams = ingredient.quantity * 100 // Default
      } else if (ingredient.unit.includes("cloves")) {
        grams = ingredient.quantity * 3 // Garlic cloves
      } else if (ingredient.unit.includes("inch")) {
        grams = ingredient.quantity * 10 // Ginger/galangal
      } else if (ingredient.unit.includes("stalks")) {
        grams = ingredient.quantity * 15 // Scallions/lemongrass
      } else if (ingredient.unit.includes("pieces") || ingredient.unit.includes("sheets")) {
        if (key.includes("nori")) grams = ingredient.quantity * 2.5
        else if (key.includes("lime leaves")) grams = ingredient.quantity * 0.5
        else if (key.includes("bay leaves")) grams = ingredient.quantity * 0.6
        else if (key.includes("chili")) grams = ingredient.quantity * 5
        else grams = ingredient.quantity * 10 // Default for pieces
      } else if (ingredient.unit.includes("can")) {
        grams = ingredient.quantity * 400 // Standard can size
      } else if (ingredient.unit.includes("package")) {
        grams = ingredient.quantity * 200 // Average package
      } else if (ingredient.unit.includes("bunch")) {
        grams = ingredient.quantity * 100 // Leafy greens
      }

      // Calculate nutrition per 100g ratio
      const ratio = grams / 100

      totalNutrition.calories += nutrition.calories * ratio
      totalNutrition.protein += nutrition.protein * ratio
      totalNutrition.carbs += nutrition.carbs * ratio
      totalNutrition.fat += nutrition.fat * ratio
      totalNutrition.fiber += nutrition.fiber * ratio
      totalNutrition.sodium += nutrition.sodium * ratio
    }
  })

  // Divide by servings to get per-serving nutrition
  Object.keys(totalNutrition).forEach((key) => {
    totalNutrition[key as keyof typeof totalNutrition] = Math.round(
      totalNutrition[key as keyof typeof totalNutrition] / servings,
    )
  })

  return totalNutrition
}
